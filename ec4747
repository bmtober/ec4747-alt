
# Run this script in the directory that has the SPAMTrain.label file.

checkscript ()
{
  # confirm that a script file is visible in path
  which "$1" &> /dev/null
  [ $? -ne 0 ]  && echo "$1 not found in path" && exit
}

checkscript "vcosine"
checkscript "vdot"
checkscript "vmag"
checkscript "vscale"
checkscript "vsum"
checkscript "vtfidf"
checkscript "vunit"
checkscript "pairs"
checkscript "body"

rm *.acc

for n in 1500 2000 2500 3000 3500 4000
do
  cat SPAMTrain.label.4327 | head -n $n | tail -n 500 > SPAMTrain.label
  make clean
  for i in {0..40}
  do
    export threshold=$(bc -l <<< "$i/20")
    rm *.csv
    make acc
  done

  pushd report
  mv ../*.acc ./
  rename ".acc" ".acc.$n" *.acc
  popd

done

